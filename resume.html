<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume - Khary A. Mendez</title>
    <meta name="description" content="Printable resume for Khary A. Mendez - Senior Principal Consultant, Red Hat Certified Architect">
    <meta name="robots" content="noindex">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        :root {
            /* Dark Theme Colors (screen) */
            --bg-primary: #0D1B2A;
            --bg-secondary: #1B263B;
            --bg-card: #1a2238;
            --text-primary: #E0E1DD;
            --text-secondary: #778DA9;
            --accent-primary: #00D9FF;
            --accent-secondary: #FFB700;
            --border-color: #2a3550;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
        }

        /* ========== CONTROLS BAR (hidden in print) ========== */
        .resume-controls {
            position: sticky;
            top: 0;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            z-index: 100;
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: center;
            justify-content: space-between;
        }

        .controls-left {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .toggle-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .toggle-group label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.875rem;
            color: var(--text-primary);
            cursor: pointer;
            padding: 0.4rem 0.75rem;
            background: var(--bg-card);
            border-radius: 6px;
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
        }

        .toggle-group label:hover {
            border-color: var(--accent-primary);
        }

        .toggle-group input[type="checkbox"] {
            accent-color: var(--accent-primary);
            width: 16px;
            height: 16px;
        }

        .detail-select {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .detail-select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .print-btn {
            background: linear-gradient(135deg, var(--accent-primary), #0099cc);
            color: #000;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.3);
        }

        .print-controls {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }

        .print-tip {
            font-size: 0.75rem;
            color: var(--text-secondary);
            max-width: 220px;
            text-align: right;
            line-height: 1.3;
        }

        /* ========== RESUME CONTENT ========== */
        .resume-wrapper {
            max-width: 850px;
            margin: 0 auto;
            padding: 2rem;
        }

        .resume-content {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2.5rem;
            border: 1px solid var(--border-color);
        }

        /* Header - compact two-column layout */
        .resume-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .resume-header-left {
            flex: 1;
        }

        .resume-name {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 0.1rem;
            line-height: 1.2;
        }

        .resume-title {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .resume-header-right {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .resume-header-right a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .resume-header-right a:hover {
            color: var(--accent-primary);
        }

        .resume-contact-item {
            display: block;
        }

        /* Sections */
        .resume-section {
            margin-bottom: 1.5rem;
        }

        .resume-section:last-child {
            margin-bottom: 0;
        }

        .resume-section.hidden {
            display: none;
        }

        .section-heading {
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent-primary);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-primary);
            margin-bottom: 1rem;
        }

        /* Summary */
        .summary-text {
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Experience */
        .work-entry {
            margin-bottom: 1.25rem;
        }

        .work-entry:last-child {
            margin-bottom: 0;
        }

        .work-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .work-company {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .work-dates {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .work-role {
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .work-summary {
            color: var(--text-primary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .work-highlights {
            list-style: disc;
            margin-left: 1.25rem;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .work-highlights li {
            margin-bottom: 0.25rem;
        }

        .work-projects {
            margin-top: 0.75rem;
            padding-left: 1rem;
            border-left: 2px solid var(--border-color);
        }

        .project-entry {
            margin-bottom: 0.75rem;
        }

        .project-entry:last-child {
            margin-bottom: 0;
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .project-name {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .project-dates {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .project-description {
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }

        .project-bullets {
            list-style: circle;
            margin-left: 1.25rem;
            color: var(--text-primary);
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }

        /* Education */
        .education-entry {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .education-school {
            font-weight: 600;
            color: var(--text-primary);
        }

        .education-degree {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .education-year {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Certifications */
        .cert-category {
            margin-bottom: 1rem;
        }

        .cert-category:last-child {
            margin-bottom: 0;
        }

        .cert-category-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .cert-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .cert-tag {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--text-primary);
        }

        .cert-tag.featured {
            border-color: var(--accent-secondary);
            background: rgba(255, 183, 0, 0.1);
        }

        /* Skills */
        .skills-category {
            margin-bottom: 0.75rem;
        }

        .skills-category:last-child {
            margin-bottom: 0;
        }

        .skills-label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .skill-tag {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--text-primary);
        }

        /* Publications */
        .publication-entry {
            margin-bottom: 1rem;
        }

        .publication-entry:last-child {
            margin-bottom: 0;
        }

        .publication-header {
            display: flex;
            flex-wrap: wrap;
            align-items: baseline;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .publication-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .publication-meta {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .publication-description {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Testimonials */
        .testimonial-entry {
            margin-bottom: 1.25rem;
            padding-left: 1rem;
            border-left: 2px solid var(--accent-primary);
        }

        .testimonial-entry:last-child {
            margin-bottom: 0;
        }

        .testimonial-quote {
            color: var(--text-primary);
            font-size: 0.85rem;
            line-height: 1.6;
            font-style: italic;
            margin: 0 0 0.5rem 0;
        }

        .testimonial-attribution {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: baseline;
        }

        .testimonial-role {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
        }

        .testimonial-context {
            color: var(--text-secondary);
            font-size: 0.75rem;
        }

        .testimonial-context::before {
            content: "â€”";
            margin-right: 0.25rem;
        }

        /* Header website line with note */
        .resume-website-line {
            display: block;
        }

        .resume-contact-note {
            font-size: 0.8rem;
            font-style: italic;
            color: var(--text-secondary);
            opacity: 0.85;
        }

        .resume-website-line a {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .resume-website-line a:hover {
            text-decoration: underline;
        }

        /* ========== TEMPLATE: MODERN PROFESSIONAL (default) ========== */
        .resume-content.template-modern {
            /* Default styles already applied */
        }

        /* ========== TEMPLATE: CLASSIC TRADITIONAL ========== */
        .resume-content.template-classic {
            font-family: Georgia, 'Times New Roman', serif;
            line-height: 1.6;
        }

        .template-classic .resume-header {
            border-bottom: 1px solid #555;
            padding-bottom: 1rem;
        }

        .template-classic .resume-name {
            color: var(--text-primary);
            font-weight: 700;
        }

        .template-classic .resume-title {
            font-style: italic;
        }

        .template-classic .section-heading {
            color: var(--text-primary);
            border-bottom: 1px solid #555;
            text-transform: none;
            letter-spacing: 0;
            font-size: 1.1rem;
        }

        .template-classic .cert-tag,
        .template-classic .skill-tag {
            background: transparent;
            border: none;
            padding: 0;
            font-size: 0.9rem;
        }

        .template-classic .cert-list,
        .template-classic .skills-list {
            display: block;
        }

        .template-classic .cert-tag::after,
        .template-classic .skill-tag::after {
            content: ', ';
        }

        .template-classic .cert-tag:last-child::after,
        .template-classic .skill-tag:last-child::after {
            content: '';
        }

        .template-classic .cert-tag.featured {
            background: transparent;
            font-weight: 600;
        }

        .template-classic .work-projects {
            border-left: none;
            padding-left: 0;
            margin-left: 1.5rem;
        }

        /* ========== TEMPLATE: COMPACT TWO-COLUMN ========== */
        .resume-content.template-two-column {
            display: grid;
            grid-template-columns: 240px 1fr;
            grid-template-areas:
                "header header"
                "sidebar main";
            gap: 1.5rem;
        }

        .template-two-column .resume-header {
            grid-area: header;
            flex-direction: column;
            text-align: center;
            gap: 0.5rem;
        }

        .template-two-column .resume-header-right {
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem 1rem;
        }

        .template-two-column .resume-header-right .resume-contact-item {
            display: inline;
        }

        .template-two-column .resume-sidebar {
            grid-area: sidebar;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .template-two-column .resume-main {
            grid-area: main;
        }

        .template-two-column .section-heading {
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
        }

        .template-two-column .resume-section {
            margin-bottom: 1rem;
        }

        .template-two-column .cert-tag,
        .template-two-column .skill-tag {
            font-size: 0.75rem;
            padding: 0.2rem 0.4rem;
        }

        .template-two-column .work-entry {
            margin-bottom: 1rem;
        }

        .template-two-column .work-company {
            font-size: 0.95rem;
        }

        .template-two-column .work-role {
            font-size: 0.85rem;
        }

        .template-two-column .work-dates {
            font-size: 0.8rem;
        }

        .template-two-column .work-summary,
        .template-two-column .work-highlights {
            font-size: 0.8rem;
        }

        .template-two-column .project-entry {
            margin-bottom: 0.5rem;
        }

        .template-two-column .project-name,
        .template-two-column .project-description,
        .template-two-column .project-bullets {
            font-size: 0.75rem;
        }

        .template-two-column .education-entry {
            flex-direction: column;
            gap: 0.1rem;
            margin-bottom: 0.75rem;
        }

        .template-two-column .education-school {
            font-size: 0.9rem;
        }

        .template-two-column .education-degree,
        .template-two-column .education-year {
            font-size: 0.8rem;
        }

        .template-two-column .summary-text {
            font-size: 0.85rem;
        }

        .template-two-column .publication-title {
            font-size: 0.85rem;
        }

        .template-two-column .publication-meta,
        .template-two-column .publication-description {
            font-size: 0.75rem;
        }

        /* ========== TEMPLATE: ATS-OPTIMIZED ========== */
        .resume-content.template-ats {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.5;
        }

        .template-ats .resume-header {
            flex-direction: column;
            text-align: left;
            border-bottom: 2px solid var(--text-primary);
        }

        .template-ats .resume-header-right {
            text-align: left;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem 1.5rem;
            margin-top: 0.5rem;
        }

        .template-ats .resume-header-right .resume-contact-item {
            display: inline;
        }

        .template-ats .resume-name {
            color: var(--text-primary);
        }

        .template-ats .section-heading {
            color: var(--text-primary);
            border-bottom: 1px solid var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 0.95rem;
        }

        .template-ats .cert-tag,
        .template-ats .skill-tag {
            background: transparent;
            border: none;
            padding: 0;
            display: inline;
        }

        .template-ats .cert-list,
        .template-ats .skills-list {
            display: block;
        }

        .template-ats .cert-tag::after,
        .template-ats .skill-tag::after {
            content: ' | ';
            color: var(--text-secondary);
        }

        .template-ats .cert-tag:last-child::after,
        .template-ats .skill-tag:last-child::after {
            content: '';
        }

        .template-ats .cert-tag.featured {
            background: transparent;
        }

        .template-ats .work-projects {
            border-left: none;
            padding-left: 0;
        }

        .template-ats .resume-website-line {
            display: none;
        }

        /* ========== TEMPLATE: EXECUTIVE SUMMARY ========== */
        .resume-content.template-executive {
            line-height: 1.6;
        }

        .template-executive .resume-header {
            text-align: center;
            flex-direction: column;
            border-bottom: 3px solid var(--accent-primary);
            padding-bottom: 1rem;
            position: relative;
        }

        /* Executive Headshot */
        .template-executive .resume-header-wrapper {
            position: relative;
            width: 100%;
        }

        .template-executive .resume-headshot {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-primary);
        }

        .template-executive .resume-headshot.hidden {
            display: none;
        }

        .template-executive .resume-header-left {
            text-align: center;
            width: 100%;
        }

        .template-executive .resume-name {
            font-size: 2rem;
        }

        .template-executive .resume-title {
            font-size: 1.1rem;
            color: var(--accent-primary);
            font-weight: 500;
        }

        .template-executive .resume-header-right {
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem 1.5rem;
            margin-top: 0.75rem;
        }

        .template-executive .resume-header-right .resume-contact-item {
            display: inline;
        }

        .template-executive .summary-text {
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .template-executive .metrics-callout {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--bg-card);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .template-executive .metric-item {
            text-align: center;
        }

        .template-executive .metric-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-primary);
            display: block;
        }

        .template-executive .metric-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .template-executive .section-heading {
            font-size: 1.1rem;
        }

        .template-executive .work-company {
            font-size: 1.1rem;
        }

        .template-executive .work-role {
            font-size: 1rem;
            font-style: normal;
            color: var(--accent-primary);
        }

        .template-executive .work-summary {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .template-executive .work-projects {
            display: none;
        }

        .template-executive .cert-category {
            margin-bottom: 0.75rem;
        }

        .template-executive .skills-category {
            display: inline;
        }

        .template-executive .skills-label {
            display: none;
        }

        .template-executive .skills-list {
            display: inline;
        }

        .template-executive .skill-tag {
            display: inline;
            background: transparent;
            border: none;
            padding: 0;
        }

        .template-executive .skill-tag::after {
            content: ' | ';
            color: var(--text-secondary);
        }

        .template-executive .skill-tag:last-child::after {
            content: '';
        }

        .template-executive [data-section="skills"] .skills-category:not(:last-child)::after {
            content: ' | ';
            color: var(--text-secondary);
        }

        /* ========== TEMPLATE: MARKDOWN ========== */
        .resume-content.template-markdown {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            font-size: 0.95rem;
            line-height: 1.6;
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 2rem;
            border-radius: 8px;
        }

        .template-markdown h1 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
        }

        .template-markdown h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-primary);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .template-markdown h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .template-markdown h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .template-markdown p {
            margin-bottom: 0.75rem;
        }

        .template-markdown strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .template-markdown em {
            color: var(--text-secondary);
        }

        .template-markdown a {
            color: var(--accent-primary);
            text-decoration: none;
        }

        .template-markdown a:hover {
            text-decoration: underline;
        }

        .template-markdown ul,
        .template-markdown ol {
            margin: 0.5rem 0 0.75rem 1.5rem;
        }

        .template-markdown li {
            margin-bottom: 0.25rem;
        }

        .template-markdown hr {
            border: none;
            border-top: 1px solid var(--border-color);
            margin: 1rem 0;
        }

        .template-markdown code {
            font-family: 'SF Mono', 'Monaco', 'Consolas', 'Liberation Mono', monospace;
            background: rgba(0, 217, 255, 0.1);
            color: var(--accent-primary);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85em;
        }

        .template-markdown blockquote {
            border-left: 3px solid var(--accent-primary);
            margin: 0.75rem 0;
            padding: 0.5rem 0 0.5rem 1rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .template-markdown blockquote p {
            margin-bottom: 0.25rem;
        }

        .template-markdown blockquote strong {
            font-style: normal;
        }

        /* ========== EXPORT BUTTONS ========== */
        .export-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .export-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .export-btn:hover {
            border-color: var(--accent-primary);
        }

        .export-btn.copied {
            background: var(--accent-primary);
            color: #000;
        }

        /* ========== PRINT STYLES ========== */
        @media print {
            /* Page setup - remove browser headers/footers by using margin: 0 */
            @page {
                margin: 0.5in 0.5in 0.6in 0.5in;
                size: letter;
            }

            /* First page can have smaller top margin */
            @page :first {
                margin-top: 0.4in;
            }

            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            html, body {
                /* Setting margin/padding to manage browser chrome */
                margin: 0 !important;
                padding: 0 !important;
            }

            body {
                background: white !important;
                color: #333 !important;
                font-size: 10pt;
                line-height: 1.4;
            }

            .no-print {
                display: none !important;
            }

            .resume-wrapper {
                max-width: none;
                padding: 0;
                margin: 0;
            }

            .resume-content {
                background: white !important;
                border: none;
                border-radius: 0;
                padding: 0;
            }

            /* Header - preserve two-column layout in print */
            .resume-header {
                display: flex !important;
                flex-direction: row !important;
                justify-content: space-between !important;
                align-items: flex-start !important;
                border-bottom: 2px solid #333;
                padding-bottom: 0.4rem;
                margin-bottom: 0.5rem;
            }

            .resume-header-left {
                flex: 1 1 auto !important;
            }

            .resume-header-right {
                flex: 0 0 auto !important;
                text-align: right !important;
                color: #555 !important;
                font-size: 9pt;
                line-height: 1.4;
            }

            .resume-name {
                color: #1a365d !important;
                font-size: 16pt;
            }

            .resume-title {
                color: #555 !important;
                font-size: 10pt;
            }

            .resume-header-right a {
                color: #1a365d !important;
            }

            /* Sections - allow breaks inside, just keep headings with content */
            .resume-section {
                margin-bottom: 0.6rem;
            }

            /* Section heading wrapper to keep heading with content */
            .section-heading {
                color: #1a365d !important;
                border-color: #1a365d !important;
                font-size: 11pt;
                padding-bottom: 0.25rem;
                margin-bottom: 0.4rem;
                /* Keep heading with following content - use both for browser compat */
                page-break-after: avoid !important;
                break-after: avoid !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }

            /* Ensure first content after heading stays with it */
            .section-heading + * {
                page-break-before: avoid !important;
                break-before: avoid !important;
            }

            /* Text colors */
            .summary-text,
            .work-company,
            .work-summary,
            .work-highlights,
            .education-school,
            .project-name,
            .project-bullets,
            .cert-category-title,
            .cert-tag,
            .skill-tag,
            .publication-title {
                color: #333 !important;
            }

            .work-role,
            .work-dates,
            .education-degree,
            .education-year,
            .project-dates,
            .project-description,
            .skills-label,
            .publication-meta,
            .publication-description,
            .testimonial-context {
                color: #555 !important;
            }

            /* Publications print */
            .publication-entry {
                margin-bottom: 0.6rem;
            }

            .publication-description {
                font-size: 9pt;
                line-height: 1.35;
            }

            /* Testimonials print */
            .testimonial-entry {
                margin-bottom: 0.75rem;
                padding-left: 0.75rem;
                border-left: 1.5pt solid #1a365d;
            }

            .testimonial-quote {
                font-size: 9pt;
                line-height: 1.4;
                color: #333 !important;
            }

            .testimonial-role {
                font-size: 8pt;
                color: #333 !important;
            }

            .testimonial-context {
                font-size: 8pt;
                color: #555 !important;
            }

            /* Header website line */
            .resume-contact-note {
                font-size: 8pt;
                font-style: italic;
                color: #555 !important;
            }

            .resume-website-line a {
                color: #1a365d !important;
                font-weight: 500;
            }

            /* Reduce spacing */
            .work-entry {
                margin-bottom: 0.5rem;
            }

            .work-highlights li {
                margin-bottom: 0.1rem;
            }

            /* Tags */
            .cert-tag,
            .skill-tag {
                background: #f5f5f5 !important;
                border-color: #ddd !important;
            }

            .cert-tag.featured {
                background: #fff8e1 !important;
                border-color: #ffc107 !important;
            }

            .work-projects {
                border-color: #ddd !important;
            }

            /* Smart page break control */
            /* Only avoid breaks inside small elements, not entire sections */
            .work-header,
            .education-entry,
            .cert-category,
            .skills-category,
            .publication-entry {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            /* Keep work entry header with at least some content */
            .work-entry {
                /* Allow breaks inside long work entries */
                page-break-inside: auto;
                break-inside: auto;
            }

            /* But keep the header row together with role */
            .work-header + .work-role {
                page-break-before: avoid;
                break-before: avoid;
            }

            /* Keep project entries together when reasonable */
            .project-entry {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            /* Keep headings with following content */
            h2, h3, .cert-category-title, .skills-label {
                page-break-after: avoid;
                break-after: avoid;
            }

            /* Orphan/widow control */
            p, li {
                orphans: 2;
                widows: 2;
            }

            /* Hide URLs in print but keep text */
            a {
                text-decoration: none !important;
            }

            /* JavaScript-controlled page break for orphaned headings */
            .force-page-break {
                page-break-before: always !important;
                break-before: page !important;
            }

            /* Prevent trailing blank page */
            .resume-content {
                margin-bottom: 0 !important;
                padding-bottom: 0 !important;
            }

            .resume-content > *:last-child {
                margin-bottom: 0 !important;
                padding-bottom: 0 !important;
            }

            /* ========== TEMPLATE-SPECIFIC PRINT STYLES ========== */

            /* Classic Traditional - serif font, no colors */
            .template-classic {
                font-family: Georgia, 'Times New Roman', serif !important;
            }

            .template-classic .resume-name {
                color: #000 !important;
            }

            .template-classic .section-heading {
                color: #000 !important;
                border-color: #333 !important;
                text-transform: none !important;
                letter-spacing: 0 !important;
            }

            .template-classic .cert-tag,
            .template-classic .skill-tag {
                background: transparent !important;
                border: none !important;
            }

            .template-classic .cert-tag.featured {
                background: transparent !important;
                border: none !important;
            }

            .template-classic .work-projects {
                border-left: none !important;
            }

            /* Compact Two-Column print layout - use floats instead of grid for proper page breaks */
            .template-two-column {
                display: block !important;
            }

            .template-two-column .resume-header {
                width: 100% !important;
                flex-direction: column !important;
                text-align: center !important;
                margin-bottom: 0.75rem !important;
            }

            .template-two-column .resume-header-left {
                text-align: center !important;
            }

            .template-two-column .resume-header-right {
                text-align: center !important;
                display: flex !important;
                flex-wrap: wrap !important;
                justify-content: center !important;
                gap: 0.25rem 0.75rem !important;
            }

            .template-two-column .resume-header-right .resume-contact-item {
                display: inline !important;
            }

            .template-two-column .resume-sidebar {
                float: left !important;
                width: 180px !important;
                padding-right: 0.75rem !important;
            }

            .template-two-column .resume-main {
                margin-left: 190px !important;
            }

            /* Clear floats after content */
            .template-two-column::after {
                content: "" !important;
                display: table !important;
                clear: both !important;
            }

            /* Keep sidebar sections together */
            .template-two-column .resume-sidebar .resume-section {
                break-inside: avoid !important;
                page-break-inside: avoid !important;
            }

            .template-two-column .section-heading {
                font-size: 9pt !important;
            }

            .template-two-column .resume-section {
                margin-bottom: 0.4rem !important;
            }

            .template-two-column .cert-tag,
            .template-two-column .skill-tag {
                font-size: 8pt !important;
                padding: 0.1rem 0.3rem !important;
            }

            .template-two-column .work-company {
                font-size: 9pt !important;
            }

            .template-two-column .work-role,
            .template-two-column .work-dates {
                font-size: 8pt !important;
            }

            .template-two-column .work-summary,
            .template-two-column .work-highlights {
                font-size: 8pt !important;
            }

            .template-two-column .project-name,
            .template-two-column .project-description,
            .template-two-column .project-bullets {
                font-size: 7.5pt !important;
            }

            .template-two-column .education-school {
                font-size: 9pt !important;
            }

            .template-two-column .education-degree,
            .template-two-column .education-year {
                font-size: 8pt !important;
            }

            .template-two-column .summary-text {
                font-size: 8.5pt !important;
            }

            /* ATS-Optimized print - simple, parseable */
            .template-ats {
                font-family: Arial, Helvetica, sans-serif !important;
            }

            .template-ats .resume-header {
                flex-direction: column !important;
                text-align: left !important;
                border-bottom: 2px solid #000 !important;
            }

            .template-ats .resume-header-left {
                text-align: left !important;
            }

            .template-ats .resume-header-right {
                text-align: left !important;
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 0.25rem 1rem !important;
            }

            .template-ats .resume-header-right .resume-contact-item {
                display: inline !important;
            }

            .template-ats .resume-name {
                color: #000 !important;
            }

            .template-ats .section-heading {
                color: #000 !important;
                border-color: #666 !important;
                text-transform: uppercase !important;
                letter-spacing: 0.1em !important;
            }

            .template-ats .cert-tag,
            .template-ats .skill-tag {
                background: transparent !important;
                border: none !important;
            }

            .template-ats .work-projects {
                border-left: none !important;
            }

            .template-ats .resume-website-line {
                display: none !important;
            }

            /* Executive Summary print */
            .template-executive .resume-header {
                flex-direction: column !important;
                text-align: center !important;
                border-bottom: 3px solid #1a365d !important;
            }

            .template-executive .resume-header-left {
                text-align: center !important;
                width: 100% !important;
            }

            .template-executive .resume-name {
                font-size: 18pt !important;
            }

            .template-executive .resume-title {
                color: #1a365d !important;
                font-size: 11pt !important;
            }

            .template-executive .resume-header-right {
                text-align: center !important;
                display: flex !important;
                flex-wrap: wrap !important;
                justify-content: center !important;
                gap: 0.25rem 1rem !important;
            }

            .template-executive .resume-header-right .resume-contact-item {
                display: inline !important;
            }

            .template-executive .summary-text {
                font-size: 10.5pt !important;
            }

            .template-executive .metrics-callout {
                display: grid !important;
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 0.5rem !important;
                margin: 0.5rem 0 !important;
                padding: 0.5rem !important;
                background: #f8f9fa !important;
                border: 1px solid #ddd !important;
                border-radius: 4px !important;
            }

            .template-executive .metric-value {
                font-size: 14pt !important;
                color: #1a365d !important;
            }

            .template-executive .metric-label {
                font-size: 7pt !important;
                color: #555 !important;
            }

            .template-executive .work-role {
                color: #1a365d !important;
            }

            .template-executive .work-projects {
                display: none !important;
            }

            .template-executive .skill-tag {
                background: transparent !important;
                border: none !important;
            }

            /* Executive Headshot print */
            .template-executive .resume-header-wrapper {
                position: relative !important;
                width: 100% !important;
            }

            .template-executive .resume-headshot {
                position: absolute !important;
                left: 0 !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                width: 80px !important;
                height: 80px !important;
                border: 2px solid #1a365d !important;
                border-radius: 50% !important;
            }

            .template-executive .resume-headshot.hidden {
                display: none !important;
            }

        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .resume-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
                padding: 1rem;
            }

            .controls-left {
                flex-direction: column;
                gap: 1rem;
            }

            .toggle-group {
                flex-wrap: wrap;
            }

            .resume-wrapper {
                padding: 1rem;
            }

            .resume-content {
                padding: 1.5rem;
            }

            .resume-header {
                flex-direction: column;
                gap: 0.5rem;
            }

            .resume-header-right {
                text-align: left;
            }

            .resume-name {
                font-size: 1.5rem;
            }

            /* Two-column template reverts to single column on mobile */
            .resume-content.template-two-column {
                display: block;
            }

            .template-two-column .resume-sidebar,
            .template-two-column .resume-main {
                display: block;
            }

            /* Executive metrics stack on mobile */
            .template-executive .metrics-callout {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ========== HIDDEN CONTACT MODAL ========== */
        .contact-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }

        .contact-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .contact-modal {
            background: var(--bg-secondary);
            border: 1px solid var(--accent-primary);
            border-radius: 12px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.2s ease;
        }

        .contact-modal-overlay.active .contact-modal {
            transform: scale(1);
        }

        .contact-modal h3 {
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
            font-size: 1.25rem;
        }

        .contact-modal p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .contact-modal-field {
            margin-bottom: 1rem;
        }

        .contact-modal-field label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .contact-modal-field input {
            width: 100%;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            padding: 0.75rem;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
        }

        .contact-modal-field input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .contact-modal-buttons {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .contact-modal-btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .contact-modal-btn.primary {
            background: var(--accent-primary);
            color: #000;
            border: none;
        }

        .contact-modal-btn.primary:hover {
            filter: brightness(1.1);
        }

        .contact-modal-btn.secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .contact-modal-btn.secondary:hover {
            border-color: var(--text-secondary);
            color: var(--text-primary);
        }

        @media print {
            .contact-modal-overlay {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Controls Bar -->
    <div class="resume-controls no-print">
        <div class="controls-left">
            <div class="control-group">
                <div class="control-group-label">Sections</div>
                <div class="toggle-group">
                    <label><input type="checkbox" data-section="summary" checked> Summary</label>
                    <label><input type="checkbox" data-section="experience" checked> Experience</label>
                    <label><input type="checkbox" data-section="education" checked> Education</label>
                    <label><input type="checkbox" data-section="certifications" checked> Certifications</label>
                    <label><input type="checkbox" data-section="skills" checked> Skills</label>
                    <label><input type="checkbox" data-section="publications" checked> Publications</label>
                    <label><input type="checkbox" data-section="testimonials"> Testimonials</label>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-label">Experience Detail</div>
                <select id="detail-level" class="detail-select">
                    <option value="full" selected>Full project details</option>
                    <option value="highlights">Key highlights</option>
                    <option value="summary">Summary only</option>
                </select>
            </div>

            <div class="control-group">
                <div class="control-group-label">Template</div>
                <select id="template-select" class="detail-select">
                    <option value="modern" selected>Modern Professional</option>
                    <option value="classic">Classic Traditional</option>
                    <option value="two-column">Compact Two-Column</option>
                    <option value="executive">Executive Summary</option>
                    <option value="ats">ATS-Optimized / Text</option>
                    <option value="markdown">Markdown</option>
                </select>
            </div>

            <div class="control-group" id="headshot-control" style="display: none;">
                <div class="control-group-label">Photo</div>
                <div class="toggle-group">
                    <label><input type="checkbox" id="headshot-toggle"> Include Headshot</label>
                </div>
            </div>

            <div class="control-group" id="text-export-controls" style="display: none;">
                <div class="control-group-label">Text Export</div>
                <div class="export-buttons">
                    <button id="download-text-btn" class="export-btn">Download .txt</button>
                    <button id="copy-text-btn" class="export-btn">Copy Text</button>
                </div>
            </div>

            <div class="control-group" id="markdown-export-controls" style="display: none;">
                <div class="control-group-label">Export</div>
                <div class="export-buttons">
                    <button id="download-md-btn" class="export-btn">Download .md</button>
                    <button id="copy-md-btn" class="export-btn">Copy</button>
                </div>
            </div>
        </div>

        <div class="print-controls">
            <button onclick="window.print()" class="print-btn">
                <span>Print / Save as PDF</span>
            </button>
            <div class="print-tip">
                Tip: In print dialog, uncheck "Headers and footers" to remove file path and date
            </div>
        </div>
    </div>

    <!-- Resume Content -->
    <div class="resume-wrapper">
        <div class="resume-content" id="resume-content">
            <!-- Content will be rendered by JavaScript -->
        </div>
    </div>

    <!-- Hidden Contact Info Modal -->
    <div class="contact-modal-overlay" id="contact-modal">
        <div class="contact-modal">
            <h3>Contact Information</h3>
            <p>Add email and phone for personal resume generation. These will not be saved permanently.</p>
            <div class="contact-modal-field">
                <label for="contact-email">Email</label>
                <input type="email" id="contact-email" placeholder="your.email@example.com">
            </div>
            <div class="contact-modal-field">
                <label for="contact-phone">Phone</label>
                <input type="tel" id="contact-phone" placeholder="(555) 123-4567">
            </div>
            <div class="contact-modal-buttons">
                <button class="contact-modal-btn secondary" id="contact-cancel">Cancel</button>
                <button class="contact-modal-btn primary" id="contact-save">Save</button>
            </div>
        </div>
    </div>

    <!-- Load shared data -->
    <script src="assets/js/resume-data.js"></script>

    <script>
        // ========== RENDER FUNCTIONS ==========

        function renderHeader(template = 'modern') {
            const p = RESUME_DATA.personal;
            const showHeadshot = template === 'executive' && document.getElementById('headshot-toggle')?.checked;

            // Executive template uses a wrapper for headshot positioning
            if (template === 'executive') {
                return `
                    <header class="resume-header">
                        <div class="resume-header-wrapper">
                            <img src="assets/images/headshot.jpg" alt="${p.name}" class="resume-headshot${showHeadshot ? '' : ' hidden'}">
                            <div class="resume-header-left">
                                <h1 class="resume-name">${p.name}</h1>
                                <div class="resume-title">${p.title}</div>
                            </div>
                        </div>
                        <div class="resume-header-right">
                            <span class="resume-contact-item">${p.location}</span>
                            ${p.email ? `<a href="mailto:${p.email}" class="resume-contact-item">${p.email}</a>` : ''}
                            ${p.phone ? `<span class="resume-contact-item">${p.phone}</span>` : ''}
                            <a href="https://${p.linkedin}" target="_blank" class="resume-contact-item">${p.linkedin}</a>
                            <a href="https://${p.github}" target="_blank" class="resume-contact-item">${p.github}</a>
                            <span class="resume-contact-item resume-website-line">
                                <span class="resume-contact-note">Full details at </span><a href="https://${p.website}" target="_blank">${p.website}</a>
                            </span>
                        </div>
                    </header>
                `;
            }

            return `
                <header class="resume-header">
                    <div class="resume-header-left">
                        <h1 class="resume-name">${p.name}</h1>
                        <div class="resume-title">${p.title}</div>
                    </div>
                    <div class="resume-header-right">
                        <span class="resume-contact-item">${p.location}</span>
                        ${p.email ? `<a href="mailto:${p.email}" class="resume-contact-item">${p.email}</a>` : ''}
                        ${p.phone ? `<span class="resume-contact-item">${p.phone}</span>` : ''}
                        <a href="https://${p.linkedin}" target="_blank" class="resume-contact-item">${p.linkedin}</a>
                        <a href="https://${p.github}" target="_blank" class="resume-contact-item">${p.github}</a>
                        <span class="resume-contact-item resume-website-line">
                            <span class="resume-contact-note">Full details at </span><a href="https://${p.website}" target="_blank">${p.website}</a>
                        </span>
                    </div>
                </header>
            `;
        }

        function renderSummary(template = 'modern') {
            const metricsCallout = template === 'executive' ? `
                <div class="metrics-callout">
                    <div class="metric-item">
                        <span class="metric-value">${RESUME_DATA.metrics.yearsExperience}+</span>
                        <span class="metric-label">Years Experience</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">${RESUME_DATA.metrics.certifications}</span>
                        <span class="metric-label">Certifications</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">${RESUME_DATA.metrics.teamsEnabled}+</span>
                        <span class="metric-label">Teams Enabled</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">${RESUME_DATA.metrics.projectsDelivered}+</span>
                        <span class="metric-label">Projects</span>
                    </div>
                </div>
            ` : '';

            return `
                <section class="resume-section" data-section="summary">
                    <h2 class="section-heading">Summary</h2>
                    <p class="summary-text">${RESUME_DATA.personal.summary}</p>
                    ${metricsCallout}
                </section>
            `;
        }

        function renderExperience(detailLevel) {
            const experienceHtml = RESUME_DATA.experience.map(job => {
                let content = `
                    <div class="work-entry">
                        <div class="work-header">
                            <span class="work-company">${job.company}</span>
                            <span class="work-dates">${job.dates}</span>
                        </div>
                        <div class="work-role">${job.role}</div>
                `;

                if (detailLevel === 'summary') {
                    content += `<p class="work-summary">${job.summary}</p>`;
                } else if (detailLevel === 'highlights') {
                    content += `
                        <p class="work-summary">${job.summary}</p>
                        <ul class="work-highlights">
                            ${job.highlights.map(h => `<li>${h}</li>`).join('')}
                        </ul>
                    `;
                } else if (detailLevel === 'full') {
                    content += `
                        <p class="work-summary">${job.summary}</p>
                        <div class="work-projects">
                            ${job.projects.map(proj => `
                                <div class="project-entry">
                                    <div class="project-header">
                                        <span class="project-name">${proj.name}</span>
                                        <span class="project-dates">${proj.dates}</span>
                                    </div>
                                    <p class="project-description">${proj.description}</p>
                                    <ul class="project-bullets">
                                        ${proj.bullets.map(b => `<li>${b}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }

                content += '</div>';
                return content;
            }).join('');

            return `
                <section class="resume-section" data-section="experience">
                    <h2 class="section-heading">Experience</h2>
                    ${experienceHtml}
                </section>
            `;
        }

        function renderEducation() {
            const eduHtml = RESUME_DATA.education.map(edu => `
                <div class="education-entry">
                    <div>
                        <span class="education-school">${edu.school}</span>
                        <span class="education-degree"> - ${edu.degree}${edu.minor ? `, Minor in ${edu.minor}` : ''}</span>
                    </div>
                    <span class="education-year">${edu.year}</span>
                </div>
            `).join('');

            return `
                <section class="resume-section" data-section="education">
                    <h2 class="section-heading">Education</h2>
                    ${eduHtml}
                </section>
            `;
        }

        function renderCertifications() {
            const categories = [
                { key: 'architect', label: 'Architect Certifications' },
                { key: 'cloud', label: 'Cloud & Professional' },
                { key: 'redhat', label: 'Red Hat Specialist' }
            ];

            const certsHtml = categories.map(cat => {
                const certs = RESUME_DATA.certifications[cat.key];
                return `
                    <div class="cert-category">
                        <div class="cert-category-title">${cat.label}</div>
                        <div class="cert-list">
                            ${certs.map(cert => `
                                <span class="cert-tag${cert.featured ? ' featured' : ''}">${cert.name}</span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');

            return `
                <section class="resume-section" data-section="certifications">
                    <h2 class="section-heading">Certifications</h2>
                    ${certsHtml}
                </section>
            `;
        }

        function renderSkills() {
            const skillCategories = [
                { key: 'platforms', label: 'Platforms' },
                { key: 'languages', label: 'Languages' },
                { key: 'devops', label: 'DevOps' },
                { key: 'middleware', label: 'Middleware' }
            ];

            const skillsHtml = skillCategories.map(cat => `
                <div class="skills-category">
                    <div class="skills-label">${cat.label}</div>
                    <div class="skills-list">
                        ${RESUME_DATA.skills[cat.key].map(skill => `
                            <span class="skill-tag">${skill}</span>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            return `
                <section class="resume-section" data-section="skills">
                    <h2 class="section-heading">Technical Skills</h2>
                    ${skillsHtml}
                </section>
            `;
        }

        function renderPublications() {
            const pubsHtml = RESUME_DATA.publications.map(pub => `
                <div class="publication-entry">
                    <div class="publication-header">
                        <span class="publication-title">${pub.title}</span>
                        <span class="publication-meta">
                            ${pub.type.charAt(0).toUpperCase() + pub.type.slice(1)}${pub.year ? ` (${pub.year})` : ''}${pub.role ? ` - ${pub.role}` : ''}${pub.publisher ? ` - ${pub.publisher}` : ''}
                        </span>
                    </div>
                    <p class="publication-description">${pub.description}</p>
                </div>
            `).join('');

            return `
                <section class="resume-section" data-section="publications">
                    <h2 class="section-heading">Publications</h2>
                    ${pubsHtml}
                </section>
            `;
        }

        function renderTestimonials() {
            if (!RESUME_DATA.testimonials || RESUME_DATA.testimonials.length === 0) return '';

            const testimonialsHtml = RESUME_DATA.testimonials.map(t => `
                <div class="testimonial-entry">
                    <p class="testimonial-quote">"${t.quote}"</p>
                    <div class="testimonial-attribution">
                        <span class="testimonial-role">${t.role}</span>
                        <span class="testimonial-context">${t.context}</span>
                    </div>
                </div>
            `).join('');

            return `
                <section class="resume-section hidden" data-section="testimonials">
                    <h2 class="section-heading">What Colleagues Say</h2>
                    ${testimonialsHtml}
                </section>
            `;
        }

        function isHidden(sectionName) {
            const checkbox = document.querySelector(`input[data-section="${sectionName}"]`);
            return checkbox && !checkbox.checked;
        }

        function generateMarkdown() {
            const p = RESUME_DATA.personal;
            const m = RESUME_DATA.metrics;
            const detailLevel = getCurrentDetailLevel();
            let md = '';

            // Header
            md += `# ${p.name}\n\n`;
            md += `**${p.title}**\n\n`;
            let contactParts = [`ðŸ“ ${p.location}`];
            if (p.email) contactParts.push(`âœ‰ï¸ ${p.email}`);
            if (p.phone) contactParts.push(`ðŸ“ž ${p.phone}`);
            contactParts.push(`[LinkedIn](https://${p.linkedin})`);
            contactParts.push(`[GitHub](https://${p.github})`);
            contactParts.push(`*Full details at* [${p.website}](https://${p.website})`);
            md += contactParts.join(' â€¢ ') + '\n\n';
            md += `---\n\n`;

            // Summary
            if (!isHidden('summary')) {
                md += `## Summary\n\n`;
                md += `${p.summary}\n\n`;
            }

            // Experience
            if (!isHidden('experience')) {
                md += `## Experience\n\n`;
                RESUME_DATA.experience.forEach(job => {
                    md += `### ${job.company}\n`;
                    md += `**${job.role}** â€¢ ${job.dates}\n\n`;
                    md += `${job.summary}\n\n`;

                    if (detailLevel === 'full' && job.projects) {
                        job.projects.forEach(proj => {
                            md += `#### ${proj.name}\n`;
                            md += `*${proj.dates}*\n\n`;
                            md += `${proj.description}\n\n`;
                            proj.bullets.forEach(b => {
                                md += `- ${b}\n`;
                            });
                            md += '\n';
                        });
                    } else if (detailLevel === 'highlights') {
                        job.highlights.forEach(h => {
                            md += `- ${h}\n`;
                        });
                        md += '\n';
                    }
                });
            }

            // Education
            if (!isHidden('education')) {
                md += `## Education\n\n`;
                RESUME_DATA.education.forEach(edu => {
                    md += `**${edu.school}** - ${edu.degree}${edu.minor ? `, Minor in ${edu.minor}` : ''} (${edu.year})\n\n`;
                });
            }

            // Certifications
            if (!isHidden('certifications')) {
                md += `## Certifications\n\n`;

                const categories = [
                    { key: 'architect', label: 'Architect Certifications' },
                    { key: 'cloud', label: 'Cloud & Professional' },
                    { key: 'redhat', label: 'Red Hat Specialist' }
                ];

                categories.forEach(cat => {
                    const certs = RESUME_DATA.certifications[cat.key];
                    if (certs && certs.length > 0) {
                        md += `**${cat.label}:** ${certs.map(c => c.name).join(', ')}\n\n`;
                    }
                });
            }

            // Skills
            if (!isHidden('skills')) {
                md += `## Technical Skills\n\n`;

                const skillCategories = [
                    { key: 'platforms', label: 'Platforms' },
                    { key: 'languages', label: 'Languages' },
                    { key: 'devops', label: 'DevOps' },
                    { key: 'middleware', label: 'Middleware' }
                ];

                skillCategories.forEach(cat => {
                    md += `**${cat.label}:** \`${RESUME_DATA.skills[cat.key].join('\`, \`')}\`\n\n`;
                });
            }

            // Publications
            if (!isHidden('publications')) {
                md += `## Publications\n\n`;
                RESUME_DATA.publications.forEach(pub => {
                    md += `**${pub.title}**`;
                    if (pub.year) md += ` (${pub.year})`;
                    if (pub.role) md += ` - ${pub.role}`;
                    if (pub.publisher) md += ` - ${pub.publisher}`;
                    md += '\n\n';
                    md += `${pub.description}\n\n`;
                });
            }

            // Testimonials
            if (!isHidden('testimonials')) {
                md += `## What Colleagues Say\n\n`;
                RESUME_DATA.testimonials.forEach(t => {
                    md += `> "${t.quote}"\n>\n`;
                    md += `> â€” **${t.role}**, ${t.context}\n\n`;
                });
            }

            return md.trim();
        }

        function renderResume(detailLevel = 'full', template = 'modern') {
            const container = document.getElementById('resume-content');

            // Remove all template classes first
            container.classList.remove('template-modern', 'template-classic', 'template-two-column', 'template-ats', 'template-executive', 'template-markdown');
            container.classList.add(`template-${template}`);

            // Handle markdown template specially - render as formatted HTML
            if (template === 'markdown') {
                const markdown = generateMarkdown();
                container.innerHTML = marked.parse(markdown);
                // Re-attach long-press listener after render
                setupLongPressListener();
                return;
            }

            // For two-column layout, we need a different DOM structure
            if (template === 'two-column') {
                container.innerHTML = `
                    ${renderHeader(template)}
                    <div class="resume-sidebar">
                        ${renderEducation()}
                        ${renderSkills()}
                        ${renderCertifications()}
                    </div>
                    <div class="resume-main">
                        ${renderSummary(template)}
                        ${renderExperience(detailLevel)}
                        ${renderPublications()}
                        ${renderTestimonials()}
                    </div>
                `;
            } else {
                container.innerHTML =
                    renderHeader(template) +
                    renderSummary(template) +
                    renderExperience(detailLevel) +
                    renderEducation() +
                    renderCertifications() +
                    renderSkills() +
                    renderPublications() +
                    renderTestimonials();
            }

            // Apply current toggle states
            updateSectionVisibility();

            // Re-attach long-press listener after render
            setupLongPressListener();
        }

        function getCurrentTemplate() {
            return document.getElementById('template-select').value;
        }

        function getCurrentDetailLevel() {
            return document.getElementById('detail-level').value;
        }

        // ========== TOGGLE CONTROLS ==========

        function updateSectionVisibility() {
            const currentTemplate = getCurrentTemplate();
            
            // If we're in markdown mode, regenerate the markdown preview
            if (currentTemplate === 'markdown') {
                const container = document.getElementById('resume-content');
                container.innerHTML = marked.parse(generateMarkdown());
                return;
            }
            
            const checkboxes = document.querySelectorAll('.toggle-group input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                const sectionName = checkbox.dataset.section;
                const section = document.querySelector(`.resume-section[data-section="${sectionName}"]`);
                if (section) {
                    section.classList.toggle('hidden', !checkbox.checked);
                }
            });
        }

        // ========== EVENT LISTENERS ==========

        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            renderResume('full', 'modern');

            // Section toggle listeners
            document.querySelectorAll('.toggle-group input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateSectionVisibility);
            });

            // Detail level listener
            document.getElementById('detail-level').addEventListener('change', (e) => {
                renderResume(e.target.value, getCurrentTemplate());
            });

            // Template listener
            document.getElementById('template-select').addEventListener('change', (e) => {
                const template = e.target.value;
                renderResume(getCurrentDetailLevel(), template);

                // Show/hide headshot control based on template
                const headshotControl = document.getElementById('headshot-control');
                headshotControl.style.display = template === 'executive' ? 'flex' : 'none';

                // Show/hide text export controls based on template
                const textExportControls = document.getElementById('text-export-controls');
                textExportControls.style.display = template === 'ats' ? 'flex' : 'none';

                // Show/hide markdown export controls based on template
                const markdownExportControls = document.getElementById('markdown-export-controls');
                markdownExportControls.style.display = template === 'markdown' ? 'flex' : 'none';

                // Hide print button for markdown template
                const printBtn = document.querySelector('.print-btn');
                printBtn.style.display = template === 'markdown' ? 'none' : 'inline-flex';
            });

            // Headshot toggle listener
            document.getElementById('headshot-toggle').addEventListener('change', (e) => {
                const headshot = document.querySelector('.resume-headshot');
                if (headshot) {
                    headshot.classList.toggle('hidden', !e.target.checked);
                }
            });

            // Plain text generation function
            function generatePlainText() {
                const p = RESUME_DATA.personal;
                const m = RESUME_DATA.metrics;

                let text = '';

                // Header
                text += `${p.name.toUpperCase()}\n`;
                text += `${p.title}\n`;
                let contactLine = [p.location];
                if (p.email) contactLine.push(p.email);
                if (p.phone) contactLine.push(p.phone);
                contactLine.push(p.linkedin, p.github, p.website);
                text += contactLine.join(' | ') + '\n';
                text += '\n' + '='.repeat(60) + '\n\n';

                // Summary (if visible)
                if (!document.querySelector('[data-section="summary"]')?.classList.contains('hidden')) {
                    text += 'SUMMARY\n';
                    text += '-'.repeat(40) + '\n';
                    text += `${p.summary}\n\n`;
                }

                // Experience (if visible)
                if (!document.querySelector('[data-section="experience"]')?.classList.contains('hidden')) {
                    text += 'EXPERIENCE\n';
                    text += '-'.repeat(40) + '\n';
                    const detailLevel = getCurrentDetailLevel();
                    RESUME_DATA.experience.forEach(job => {
                        text += `${job.company} | ${job.role} | ${job.dates}\n`;
                        text += `${job.summary}\n`;

                        if (detailLevel === 'full' && job.projects) {
                            // Full project details
                            job.projects.forEach(proj => {
                                text += `\n  PROJECT: ${proj.name} (${proj.dates})\n`;
                                text += `  ${proj.description}\n`;
                                proj.bullets.forEach(b => {
                                    text += `    - ${b}\n`;
                                });
                            });
                        } else if (detailLevel !== 'summary') {
                            // Highlights mode (default)
                            job.highlights.forEach(h => {
                                text += `  - ${h}\n`;
                            });
                        }
                        text += '\n';
                    });
                }

                // Education (if visible)
                if (!document.querySelector('[data-section="education"]')?.classList.contains('hidden')) {
                    text += 'EDUCATION\n';
                    text += '-'.repeat(40) + '\n';
                    RESUME_DATA.education.forEach(edu => {
                        text += `${edu.school} - ${edu.degree}${edu.minor ? `, Minor in ${edu.minor}` : ''} (${edu.year})\n`;
                    });
                    text += '\n';
                }

                // Certifications (if visible)
                if (!document.querySelector('[data-section="certifications"]')?.classList.contains('hidden')) {
                    text += 'CERTIFICATIONS\n';
                    text += '-'.repeat(40) + '\n';

                    const categories = [
                        { key: 'architect', label: 'Architect' },
                        { key: 'cloud', label: 'Cloud & Professional' },
                        { key: 'redhat', label: 'Red Hat Specialist' }
                    ];

                    categories.forEach(cat => {
                        const certs = RESUME_DATA.certifications[cat.key];
                        if (certs && certs.length > 0) {
                            text += `${cat.label}: ${certs.map(c => c.name).join(' | ')}\n\n`;
                        }
                    });
                }

                // Skills (if visible)
                if (!document.querySelector('[data-section="skills"]')?.classList.contains('hidden')) {
                    text += 'TECHNICAL SKILLS\n';
                    text += '-'.repeat(40) + '\n';

                    const skillCategories = [
                        { key: 'platforms', label: 'Platforms' },
                        { key: 'languages', label: 'Languages' },
                        { key: 'devops', label: 'DevOps' },
                        { key: 'middleware', label: 'Middleware' }
                    ];

                    skillCategories.forEach(cat => {
                        text += `${cat.label}: ${RESUME_DATA.skills[cat.key].join(' | ')}\n`;
                    });
                    text += '\n';
                }

                // Publications (if visible)
                if (!document.querySelector('[data-section="publications"]')?.classList.contains('hidden')) {
                    text += 'PUBLICATIONS\n';
                    text += '-'.repeat(40) + '\n';
                    RESUME_DATA.publications.forEach(pub => {
                        text += `${pub.title}`;
                        if (pub.year) text += ` (${pub.year})`;
                        if (pub.role) text += ` - ${pub.role}`;
                        if (pub.publisher) text += ` - ${pub.publisher}`;
                        text += '\n';
                        text += `  ${pub.description}\n\n`;
                    });
                }

                // Testimonials (if visible)
                if (!document.querySelector('[data-section="testimonials"]')?.classList.contains('hidden')) {
                    text += 'WHAT COLLEAGUES SAY\n';
                    text += '-'.repeat(40) + '\n';
                    RESUME_DATA.testimonials.forEach(t => {
                        text += `"${t.quote}"\n`;
                        text += `  â€” ${t.role}, ${t.context}\n\n`;
                    });
                }

                return text.trim();
            }

            // Download text button listener
            document.getElementById('download-text-btn').addEventListener('click', () => {
                const text = generatePlainText();
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Khary_Mendez_Resume.txt';
                a.click();
                URL.revokeObjectURL(url);
            });

            // Copy text button listener
            document.getElementById('copy-text-btn').addEventListener('click', () => {
                const text = generatePlainText();
                navigator.clipboard.writeText(text).then(() => {
                    const btn = document.getElementById('copy-text-btn');
                    btn.textContent = 'Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = 'Copy Text';
                        btn.classList.remove('copied');
                    }, 2000);
                });
            });

            // Download markdown button listener
            document.getElementById('download-md-btn').addEventListener('click', () => {
                const md = generateMarkdown();
                const blob = new Blob([md], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Khary_Mendez_Resume.md';
                a.click();
                URL.revokeObjectURL(url);
            });

            // Copy markdown button listener
            document.getElementById('copy-md-btn').addEventListener('click', () => {
                const md = generateMarkdown();
                navigator.clipboard.writeText(md).then(() => {
                    const btn = document.getElementById('copy-md-btn');
                    btn.textContent = 'Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = 'Copy';
                        btn.classList.remove('copied');
                    }, 2000);
                });
            });

            // Fix orphaned headings before print
            window.addEventListener('beforeprint', () => {
                // Remove any previous forced breaks
                document.querySelectorAll('.force-page-break').forEach(el => {
                    el.classList.remove('force-page-break');
                });

                const content = document.getElementById('resume-content');

                // Page height in pixels (approximate for print layout)
                const pageHeight = 960;
                const minContentAfterHeading = 100;

                // Walk through visible sections
                const elements = content.querySelectorAll('.resume-section:not(.hidden)');

                elements.forEach(el => {
                    const heading = el.querySelector('.section-heading');
                    if (heading) {
                        const headingRect = heading.getBoundingClientRect();
                        const headingBottom = headingRect.bottom - content.getBoundingClientRect().top;

                        // Calculate position within current page
                        const positionInPage = headingBottom % pageHeight;

                        // If heading is near bottom of page, force break before it
                        if (positionInPage > (pageHeight - minContentAfterHeading)) {
                            heading.classList.add('force-page-break');
                        }
                    }
                });
            });

            // Clean up after print
            window.addEventListener('afterprint', () => {
                document.querySelectorAll('.force-page-break').forEach(el => {
                    el.classList.remove('force-page-break');
                });
            });

            // ========== HIDDEN CONTACT INFO MODAL ==========
            initContactModal();
        });

        // ========== CONTACT MODAL (TOP-LEVEL) ==========
        let longPressTimer = null;
        const LONG_PRESS_DURATION = 800; // milliseconds

        function showContactModal() {
            const contactModal = document.getElementById('contact-modal');
            const contactEmailInput = document.getElementById('contact-email');
            // Populate fields with current values
            contactEmailInput.value = RESUME_DATA.personal.email || '';
            document.getElementById('contact-phone').value = RESUME_DATA.personal.phone || '';
            contactModal.classList.add('active');
            contactEmailInput.focus();
        }

        function hideContactModal() {
            document.getElementById('contact-modal').classList.remove('active');
        }

        function saveContactInfo() {
            RESUME_DATA.personal.email = document.getElementById('contact-email').value.trim();
            RESUME_DATA.personal.phone = document.getElementById('contact-phone').value.trim();
            hideContactModal();
            // Re-render to show updated contact info
            renderResume(getCurrentDetailLevel(), getCurrentTemplate());
        }

        function setupLongPressListener() {
            const nameElement = document.querySelector('.resume-name');
            if (!nameElement) return;

            // Clear any previous timer
            const clearLongPress = () => {
                if (longPressTimer) {
                    clearTimeout(longPressTimer);
                    longPressTimer = null;
                }
            };

            // Start long-press timer
            const startLongPress = (e) => {
                clearLongPress();
                longPressTimer = setTimeout(() => {
                    e.preventDefault();
                    showContactModal();
                }, LONG_PRESS_DURATION);
            };

            // Desktop: mouse events
            nameElement.addEventListener('mousedown', startLongPress);
            nameElement.addEventListener('mouseup', clearLongPress);
            nameElement.addEventListener('mouseleave', clearLongPress);

            // Mobile: touch events
            nameElement.addEventListener('touchstart', startLongPress, { passive: true });
            nameElement.addEventListener('touchend', clearLongPress);
            nameElement.addEventListener('touchmove', clearLongPress);
            nameElement.addEventListener('touchcancel', clearLongPress);

            // Add visual hint on hover (subtle cursor change)
            nameElement.style.cursor = 'default';
        }

        function initContactModal() {
            const contactModal = document.getElementById('contact-modal');
            const contactSaveBtn = document.getElementById('contact-save');
            const contactCancelBtn = document.getElementById('contact-cancel');
            const contactPhoneInput = document.getElementById('contact-phone');

            // Modal button listeners
            contactSaveBtn.addEventListener('click', saveContactInfo);
            contactCancelBtn.addEventListener('click', hideContactModal);

            // Close modal on overlay click
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) {
                    hideContactModal();
                }
            });

            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && contactModal.classList.contains('active')) {
                    hideContactModal();
                }
            });

            // Save on Enter key in phone field
            contactPhoneInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    saveContactInfo();
                }
            });

            // Set up listener after initial render
            setupLongPressListener();
        }
    </script>
</body>
</html>
